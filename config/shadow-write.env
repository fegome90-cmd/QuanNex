# TaskDB Shadow Write Configuration
# Para validar la migración a PostgreSQL sin riesgo

TASKDB_DRIVER=dual        # dual: escribe a sqlite + pg
TASKDB_PG_URL=postgres://user:pass@host:5432/taskdb
TASKDB_SQLITE_PATH=./data/taskdb.sqlite
TASKDB_DUAL_STRICT=false  # no fallar si una rama falla

# Adapter dual (resumen de comportamiento)
# - En insert/bulkInsert, escribe a ambas
# - Cuenta aciertos/fallos por rama y los expone en métricas
# - Si DUAL_STRICT=true, falla si una rama falla (para canary controlado)

# Para activar shadow write:
# 1. Configurar PostgreSQL
# 2. Copiar este archivo a .env
# 3. Ajustar TASKDB_PG_URL
# 4. Ejecutar carga moderada y revisar:
#    - Desviaciones entre conteos de eventos
#    - Latencias de flush en cada rama
