{
  "name": "GAP-004: Análisis Directo de Autenticación",
  "description": "Workflow directo para analizar autenticación entre agentes sin usar context agent",
  "steps": [
    {
      "step_id": "generar_plan_autenticacion_directo",
      "agent": "prompting",
      "input": {
        "goal": "Crear plan detallado de implementación de autenticación JWT entre agentes",
        "context": "Análisis directo de agentes: agents/context/agent.js, agents/prompting/agent.js, agents/rules/agent.js, agents/security/agent.js. Todos usan spawnSync para comunicación sin autenticación.",
        "style": "technical",
        "constraints": [
          "Implementar sistema JWT para autenticación entre agentes",
          "Crear middleware de autenticación para comunicación",
          "Implementar generación y validación de tokens",
          "Asegurar comunicación segura entre agentes",
          "Mantener compatibilidad con sistema actual",
          "Implementar rotación de tokens",
          "Crear sistema de identidad de agentes",
          "Implementar autorización basada en roles",
          "Asegurar que solo agentes autorizados puedan comunicarse",
          "Implementar logging de autenticación",
          "Crear sistema de gestión de claves"
        ]
      }
    },
    {
      "step_id": "validar_plan_autenticacion_directo",
      "agent": "rules",
      "depends_on": ["generar_plan_autenticacion_directo"],
      "input": {
        "policy_refs": [
          "SECURITY.md"
        ],
        "compliance_level": "strict",
        "code": "{{generar_plan_autenticacion_directo.output.system_prompt}}",
        "rules": [
          "Todos los agentes deben autenticarse antes de comunicarse",
          "Usar JWT con claves seguras y rotación",
          "Implementar autorización basada en roles",
          "Logging de todas las autenticaciones",
          "Validación estricta de tokens",
          "Comunicación encriptada entre agentes",
          "Gestión segura de claves y secretos",
          "Prevención de ataques de replay",
          "Timeout de tokens apropiado",
          "Sistema de revocación de tokens"
        ]
      }
    }
  ]
}
