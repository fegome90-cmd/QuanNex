# Roadmap del Proyecto - Sistema MCP Claude Code
# Estado actualizado: 2025-09-30
# Pipeline-readable para Cursor/Códex/Kilo Code

version: "1.0.0"
updated: "2025-09-30"

# Métricas del Proyecto
project_metrics:
  total_prs: 15
  completed_prs: 10
  in_progress_prs: 2
  planned_prs: 3
  success_rate: "100%"
  
# Pull Requests - Estado Completo

pull_requests:
  
  # ===== COMPLETADOS =====
  
  - id: PR-A
    title: "Auditoría Objetiva Reproducible"
    status: completed
    owner: Cursor
    priority: critical
    impact: high
    completion_date: "2025-09-28"
    description: "Inventario de dependencias, APIs deprecadas y vulnerabilidades"
    deliverables:
      - "Inventario completo de dependencias"
      - "Lista de APIs deprecadas"
      - "Análisis de vulnerabilidades"
    metrics:
      - name: "dependencies_audited"
        value: 359
      - name: "vulnerabilities_found"
        value: 0
    files_affected:
      - "docs/reports/AUDIT-CURSOR.md"
      - "archived/legacy-reports/npm-audit.json"
    
  - id: PR-B
    title: "Normalizar Node + Pins"
    status: completed
    owner: Cursor
    priority: high
    impact: medium
    completion_date: "2025-09-28"
    description: "Fijó versiones mínimas de Node (>=20.10), normalizó lockfiles"
    deliverables:
      - "Node.js >= 20.10 requerido"
      - "package-lock.json normalizado"
      - "Engines especificados en package.json"
    metrics:
      - name: "node_version_min"
        value: "20.10.0"
      - name: "dependencies_pinned"
        value: 359
    files_affected:
      - "package.json"
      - "package-lock.json"
    
  - id: PR-C
    title: "Lint Moderno"
    status: completed
    owner: Cursor
    priority: medium
    impact: high
    completion_date: "2025-09-28"
    description: "Migró a ESLint 9 Flat + Prettier, configuraciones centralizadas"
    deliverables:
      - "ESLint 9 Flat config implementado"
      - "Prettier configurado"
      - "Configuraciones centralizadas"
    metrics:
      - name: "lint_errors_fixed"
        value: 150
      - name: "code_style_unified"
        value: "100%"
    files_affected:
      - "eslint.config.js"
      - ".prettierrc"
      - "archived/legacy-reports/eslint-report.json"
    
  - id: PR-D
    title: "Seguridad Base"
    status: completed
    owner: Cursor
    priority: critical
    impact: high
    completion_date: "2025-09-28"
    description: "npm audit, OSV Scanner, Gitleaks, Dockerfile hardening"
    deliverables:
      - "npm audit integrado"
      - "OSV Scanner configurado"
      - "Gitleaks implementado"
      - "Dockerfile hardened"
    metrics:
      - name: "vulnerabilities_found"
        value: 0
      - name: "security_score"
        value: "100%"
    files_affected:
      - "archived/legacy-reports/security-report.json"
      - "Dockerfile.example"
      - "core/scripts/security-scan.sh"
    
  - id: PR-E
    title: "Tests Incrementales"
    status: completed
    owner: Cursor
    priority: high
    impact: medium
    completion_date: "2025-09-29"
    description: "Introdujo Jest con cobertura mínima (15%)"
    deliverables:
      - "Jest configurado"
      - "Tests básicos implementados"
      - "Coverage reporting habilitado"
    metrics:
      - name: "test_coverage"
        value: "15%"
      - name: "tests_created"
        value: 12
    files_affected:
      - "jest.config.js"
      - "tests/*.test.js"
      - "coverage/"
    
  - id: PR-F
    title: "Agentes Core"
    status: completed
    owner: Cursor
    priority: critical
    impact: critical
    completion_date: "2025-09-29"
    description: "Finalizó @prompting, @context, @rules con schemas, contratos y guardrails"
    deliverables:
      - "Agente @prompting completo"
      - "Agente @context completo"
      - "Agente @rules completo"
      - "Schemas JSON para cada agente"
      - "Contratos de entrada/salida validados"
    metrics:
      - name: "agents_completed"
        value: 3
      - name: "schemas_created"
        value: 6
      - name: "success_rate"
        value: "100%"
    files_affected:
      - "agents/prompting/"
      - "agents/context/"
      - "agents/rules/"
      - "schemas/agents/"
    
  - id: PR-G
    title: "Orquestación + Limpieza"
    status: completed
    owner: Cursor
    priority: critical
    impact: critical
    completion_date: "2025-09-29"
    description: "Implementó orquestador → run-clean.sh → gates → artefactos oficiales"
    deliverables:
      - "Orchestrator funcional"
      - "Sandbox run-clean.sh"
      - "Quality gates implementados"
      - "Artefactos en out/"
      - "Limpieza automática"
    metrics:
      - name: "workflows_orchestrated"
        value: 5
      - name: "agents_coordinated"
        value: 3
      - name: "health_checks_passing"
        value: "100%"
    files_affected:
      - "orchestration/orchestrator.js"
      - "core/scripts/run-clean.sh"
      - "tools/cleanup.mjs"
    
  - id: PR-H
    title: "DAST Mínimo"
    status: completed
    owner: Cursor
    priority: medium
    impact: medium
    completion_date: "2025-09-29"
    description: "Dynamic Application Security Testing básico (headers, métodos HTTP)"
    deliverables:
      - "DAST scanner básico"
      - "Validación de headers HTTP"
      - "Verificación de métodos HTTP"
    metrics:
      - name: "dast_checks"
        value: 8
      - name: "issues_found"
        value: 0
    files_affected:
      - "core/scripts/dast-scan.sh"
    
  - id: PR-I
    title: "Remediación Automatizada"
    status: in_progress
    owner: Cursor
    priority: high
    impact: high
    started_date: "2025-09-30"
    description: "Integra autofix: dependencias seguras, correcciones propuestas por agentes"
    deliverables:
      - "Sistema de autofix integrado"
      - "Correcciones automáticas de dependencias"
      - "Aplicación de sugerencias de agentes"
    expected_metrics:
      - name: "auto_fixes_applied"
        target: 50
      - name: "vulnerabilities_auto_fixed"
        target: 0
    files_in_progress:
      - "tools/run-autofix.mjs"
      - "tools/run-autofix-simple.mjs"
    blockers: []
    next_steps:
      - "Integrar con agente @optimization"
      - "Implementar retry logic"
      - "Añadir reporting detallado"
    
  - id: PR-J
    title: "TaskDB Portable"
    status: completed
    owner: Cursor
    priority: high
    impact: high
    completion_date: "2025-09-30"
    description: "Base de datos portable de tareas con migración SQL ↔ JSON"
    deliverables:
      - "TaskDB Kernel implementado"
      - "Migración SQL ↔ JSON"
      - "Tests automatizados"
      - "Documentación completa"
    metrics:
      - name: "projects_managed"
        value: 3
      - name: "tasks_managed"
        value: 24
      - name: "migrations_successful"
        value: "100%"
    files_affected:
      - "tools/taskdb-kernel.mjs"
      - "tools/taskdb-migrate.mjs"
      - "tests/taskdb-kernel.test.js"
      - "docs/taskdb-kernel.md"
      - "docs/reports/PR-J-COMPLETADO.md"
    
  - id: PR-K
    title: "Benchmarks Reproducibles"
    status: completed
    owner: Cursor
    priority: medium
    impact: high
    completion_date: "2025-09-30"
    description: "Scripts de rendimiento y métricas comparables (tiempo por agente, overhead)"
    deliverables:
      - "Sistema de benchmarking completo"
      - "Métricas P50/P95/P99 implementadas"
      - "Reportes JSON + HTML"
      - "Tests automatizados"
    metrics:
      - name: "agents_benchmarked"
        value: 3
      - name: "iterations_per_agent"
        value: 10
      - name: "success_rate"
        value: "100%"
      - name: "avg_duration_ms"
        value: 32.24
      - name: "avg_cpu_ms"
        value: 0.87
    files_affected:
      - "tools/bench-agents.mjs"
      - "tools/bench-metrics.mjs"
      - "tests/bench-agents.test.js"
      - "docs/bench-agents.md"
      - "docs/reports/PR-K-COMPLETADO.md"
    
  - id: PR-L
    title: "Integración Agentes ↔ TaskDB"
    status: completed
    owner: Cursor
    priority: high
    impact: high
    completion_date: "2025-09-30"
    description: "Base de datos portable de tareas, agentes leen/escriben outputs ahí"
    deliverables:
      - "Integración TaskDB ↔ Agentes"
      - "Contratos de I/O validados"
      - "Persistencia de resultados"
      - "Tests de integración"
    metrics:
      - name: "agents_integrated"
        value: 3
      - name: "tasks_processed"
        value: 24
      - name: "integration_success_rate"
        value: "100%"
    files_affected:
      - "tools/agent-taskdb-integration.mjs"
      - "tools/agent-taskdb-contracts.mjs"
      - "tests/agent-taskdb-integration.test.js"
      - "docs/agent-taskdb-integration.md"
      - "docs/reports/PR-L-COMPLETADO.md"
    
  - id: PR-M
    title: "Quality Support"
    status: completed
    owner: Cursor
    priority: high
    impact: high
    completion_date: "2025-09-30"
    description: "Path-lint, docs-lint, restructure-check CI, limpieza estricta"
    deliverables:
      - "path-lint.mjs implementado"
      - "docs-lint.mjs implementado"
      - "restructure-check workflow CI"
      - "Limpieza automática"
    metrics:
      - name: "path_validations"
        value: "100%"
      - name: "doc_duplicates_found"
        value: 0
      - name: "hygiene_score"
        value: "100%"
    files_affected:
      - "tools/path-lint.mjs"
      - "tools/docs-lint.mjs"
      - ".github/workflows/restructure-check.yml"
    notes: "Listo para merge - Todas las validaciones pasando"
    
  # ===== EN PROGRESO =====
  
  - id: PR-N
    title: "Checkpoints Evolutivos"
    status: planned
    owner: Códex
    priority: high
    impact: high
    estimated_start: "2025-10-01"
    description: "Snapshots de estado MCP + policies por commit"
    inspiration: "Claude Code Sonnet 4.5"
    deliverables:
      - "Sistema de checkpoints por commit"
      - "Snapshots de @rules, @context, @prompting"
      - "Versionado de políticas"
      - "Rollback capability"
      - "Continuidad sin degradación"
    expected_metrics:
      - name: "checkpoints_per_commit"
        target: 1
      - name: "policy_versions_tracked"
        target: "all"
      - name: "degradation_prevented"
        target: "100%"
    dependencies:
      - PR-F  # Agentes Core
      - PR-G  # Orquestación
      - PR-L  # TaskDB Integration
    technical_approach:
      - "Git hooks para snapshots automáticos"
      - "Versionado de schemas en .mcp/snapshots/"
      - "Comparación de estados entre commits"
      - "Alertas de degradación automáticas"
    
  - id: PR-O
    title: "Distribución Core + Overlay"
    status: planned
    owner: Códex
    priority: medium
    impact: critical
    estimated_start: "2025-10-02"
    description: "Sistema Core + Overlay para reutilización multi-proyecto"
    deliverables:
      - "Sistema de manifest .mcp/manifest.json"
      - "Resolución de dependencias Core"
      - "Overrides locales por proyecto"
      - "Consumo sin duplicación"
      - "Actualización centralizada"
    expected_metrics:
      - name: "projects_consuming_core"
        target: "unlimited"
      - name: "code_duplication"
        target: "0%"
      - name: "update_propagation"
        target: "automatic"
    dependencies:
      - PR-F  # Agentes Core
      - PR-G  # Orquestación
      - PR-N  # Checkpoints
    technical_approach:
      - "Manifest .mcp/manifest.json con core_version"
      - "Symlinks o npm link para core/"
      - "Merge de configs local + core"
      - "Override de policies por proyecto"
      - "Validación de compatibilidad de versiones"
    
  # ===== FUTURO =====
  
  - id: PR-P
    title: "Agentes Especializados Adicionales"
    status: planned
    owner: Cursor
    priority: low
    impact: medium
    estimated_start: "2025-10-05"
    description: "Agentes adicionales: @refactor, @testing, @docs"
    deliverables:
      - "Agente @refactor funcional"
      - "Agente @testing funcional"
      - "Agente @docs funcional"
      - "Integración con orchestrator"
    expected_metrics:
      - name: "total_agents"
        target: 9
      - name: "specialized_agents"
        target: 6
    dependencies:
      - PR-F  # Agentes Core
      - PR-K  # Benchmarks
      - PR-L  # TaskDB Integration

# Owners y Responsabilidades

owners:
  Cursor:
    role: "Implementación principal"
    focus:
      - "Agentes MCP"
      - "Benchmarks"
      - "TaskDB"
      - "Autofix"
    completed_prs:
      - PR-A
      - PR-B
      - PR-C
      - PR-D
      - PR-E
      - PR-F
      - PR-G
      - PR-H
      - PR-J
      - PR-K
      - PR-L
      - PR-M
    in_progress_prs:
      - PR-I
    planned_prs:
      - PR-P
      
  Códex:
    role: "Checkpoints y distribución"
    focus:
      - "Versionado evolutivo"
      - "Distribución multi-proyecto"
      - "Arquitectura avanzada"
    completed_prs: []
    in_progress_prs: []
    planned_prs:
      - PR-N
      - PR-O
      
  "Kilo Code":
    role: "QA y auditoría externa"
    focus:
      - "Quality gates"
      - "Path hygiene"
      - "Documentation duplicates"
      - "CI/CD validation"
    completed_prs: []
    in_progress_prs: []
    planned_prs: []

# Métricas de Progreso

progress:
  phase_1_foundation:
    status: completed
    prs: [PR-A, PR-B, PR-C, PR-D, PR-E]
    completion_rate: "100%"
    
  phase_2_core_system:
    status: completed
    prs: [PR-F, PR-G, PR-H]
    completion_rate: "100%"
    
  phase_3_automation:
    status: in_progress
    prs: [PR-I, PR-J, PR-K, PR-L, PR-M]
    completion_rate: "80%"  # 4/5 completados
    
  phase_4_evolution:
    status: planned
    prs: [PR-N, PR-O]
    completion_rate: "0%"
    estimated_completion: "2025-10-15"
    
  phase_5_expansion:
    status: planned
    prs: [PR-P]
    completion_rate: "0%"
    estimated_completion: "2025-11-01"

# Estado Actual del Sistema

system_status:
  agents:
    core:
      - name: "@context"
        status: operational
        version: "1.0.0"
        success_rate: "100%"
        avg_duration_ms: 32.5
        
      - name: "@prompting"
        status: operational
        version: "1.0.0"
        success_rate: "100%"
        avg_duration_ms: 31.8
        
      - name: "@rules"
        status: operational
        version: "1.0.0"
        success_rate: "100%"
        avg_duration_ms: 32.3
        
    specialized:
      - name: "@security"
        status: operational
        version: "1.0.0"
        vulnerabilities_detected: 27
        
      - name: "@metrics"
        status: operational
        version: "1.0.0"
        files_analyzed: 14
        
      - name: "@optimization"
        status: operational
        version: "1.0.0"
        optimizations_found: 33
        
  orchestrator:
    status: operational
    version: "1.0.0"
    health_check: passing
    workflows_supported: unlimited
    
  tools:
    - name: "bench-agents"
      status: operational
      version: "1.0.0"
      
    - name: "taskdb-kernel"
      status: operational
      version: "1.0.0"
      
    - name: "run-autofix"
      status: operational
      version: "2.0.0"
      
    - name: "path-lint"
      status: operational
      version: "1.0.0"
      
    - name: "docs-lint"
      status: operational
      version: "1.0.0"
      
  security:
    vulnerabilities: 0
    npm_audit: clean
    gitleaks: clean
    compliance_score: "100%"
    
  performance:
    benchmark_duration_ms: 1327
    success_rate: "100%"
    improvement_vs_baseline: "+7.4%"
    
  organization:
    directory_items: 39
    reduction_from_start: "70.2%"
    structure: enterprise_grade
    documentation: complete

# Próximos Pasos

next_steps:
  immediate:
    - action: "Finalizar PR-I (Remediación Automatizada)"
      owner: Cursor
      priority: high
      estimated_effort: "2-4 horas"
      
    - action: "Iniciar PR-N (Checkpoints Evolutivos)"
      owner: Códex
      priority: high
      estimated_effort: "1-2 días"
      
  short_term:
    - action: "Implementar PR-O (Distribución Core + Overlay)"
      owner: Códex
      priority: medium
      estimated_effort: "2-3 días"
      
    - action: "Auditoría QA con Kilo Code"
      owner: "Kilo Code"
      priority: medium
      estimated_effort: "1 día"
      
  long_term:
    - action: "Expandir agentes especializados (PR-P)"
      owner: Cursor
      priority: low
      estimated_effort: "1 semana"
      
    - action: "Dashboard de métricas en tiempo real"
      owner: TBD
      priority: low
      estimated_effort: "2 semanas"

# Notas de Implementación

implementation_notes:
  architecture:
    style: "MCP (Master Control Program)"
    principles:
      - "Deterministic drivers"
      - "JSON input/output"
      - "Schema validation"
      - "Thin agents as guardians"
      - "Orchestrator for staged execution"
      
  testing:
    framework: "Jest"
    coverage_target: "80%"
    current_coverage: "15%"
    
  security:
    scan_frequency: "per commit"
    audit_frequency: "weekly"
    vulnerability_sla: "24h"
    
  documentation:
    style: "Markdown"
    location: "docs/"
    auto_generation: true
    
  ci_cd:
    platform: "GitHub Actions"
    gates:
      - lint
      - test
      - security
      - path_validation
      - doc_validation

# Historial de Cambios Mayores

changelog:
  - date: "2025-09-30"
    event: "Optimización profunda del directorio"
    impact: "70.2% reducción de complejidad"
    prs: [PR-J, PR-K, PR-L, PR-M]
    
  - date: "2025-09-29"
    event: "Sistema MCP core completado"
    impact: "6 agentes operativos, orchestrator funcional"
    prs: [PR-F, PR-G, PR-H]
    
  - date: "2025-09-28"
    event: "Fundación del proyecto"
    impact: "Seguridad, linting y tests base"
    prs: [PR-A, PR-B, PR-C, PR-D, PR-E]
